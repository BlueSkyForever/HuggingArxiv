# 大型语言模型：作为测试用例生成器的性能评估及优化

发布时间：2024年04月20日

`LLM应用` `软件工程` `测试用例生成`

> Large Language Models as Test Case Generators: Performance Evaluation and Enhancement

# 摘要

> 大型语言模型（LLMs）在代码生成领域的应用已取得显著成果。与此同时，测试用例的生成对于保障代码质量和可靠性同样重要，但LLMs在这一领域的应用尚未被深入挖掘。目前的研究多集中于利用LLMs生成的测试用例来提升代码生成的质量，而对于LLMs独立完成测试用例生成的能力，尚缺乏全面评估。为了填补这一空白，我们开展了广泛的实验，以探究LLMs生成高质量测试用例的能力。实验结果显示，面对更复杂的问题，即便是最先进的LLMs也难以生成正确的测试用例，这主要是由于它们在计算和推理上的局限。为了解决这一问题，我们提出了一个创新的多代理框架——\emph{TestChain}，它将测试输入与输出的生成过程分离。TestChain通过ReAct格式的对话链路，使LLMs能够与Python解释器进行交互，从而提供更精确的测试输出。实验结果证明，TestChain在性能上大幅超越了基线模型。特别是在LeetCode-hard数据集上，以GPT-4为支撑的TestChain在测试用例准确度上实现了13.84%的显著提升。

> Code generation with Large Language Models (LLMs) has been extensively studied and achieved remarkable progress. As a complementary aspect to code generation, test case generation is of crucial importance in ensuring the quality and reliability of code. However, using LLMs as test case generators has been much less explored. Current research along this line primarily focuses on enhancing code generation with assistance from test cases generated by LLMs, while the performance of LLMs in test case generation alone has not been comprehensively examined. To bridge this gap, we conduct extensive experiments to study how well LLMs can generate high-quality test cases. We find that as the problem difficulty increases, state-of-the-art LLMs struggle to generate correct test cases, largely due to their inherent limitations in computation and reasoning. To mitigate this issue, we further propose a multi-agent framework called \emph{TestChain} that decouples the generation of test inputs and test outputs. Notably, TestChain uses a ReAct format conversation chain for LLMs to interact with a Python interpreter in order to provide more accurate test outputs. Our results indicate that TestChain outperforms the baseline by a large margin. Particularly, in terms of the accuracy of test cases, TestChain using GPT-4 as the backbone achieves a 13.84\% improvement over the baseline on the LeetCode-hard dataset.

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x1.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x2.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x3.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x4.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x5.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x6.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x7.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x8.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x9.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x10.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x11.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x12.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x13.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x14.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x15.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x16.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x17.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x18.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x19.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x20.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x21.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x22.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x23.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x24.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x25.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x26.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x27.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x28.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x29.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x30.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x31.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x32.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x33.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x34.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x35.png)

![大型语言模型：作为测试用例生成器的性能评估及优化](../../../paper_images/2404.13340/x36.png)

[Arxiv](https://arxiv.org/abs/2404.13340)